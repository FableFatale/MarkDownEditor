# Test info

- Name: 修复功能验证测试 >> 验证页面基本加载
- Location: D:\MarkDownEditor\e2e\functionality-test.spec.ts:13:3

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toContainText(expected)

Locator: locator('body')
- Expected string  -  1
+ Received string  + 54

- 欢迎使用
+
+     125 字866 字符阅读 1分钟991234567891011121314151617181920212223242526272829303132›⌄⌄⌄⌄# 单行工具栏 Markdown 编辑器这是一个将所有工具栏功能合并到一行的现代化 Markdown 编辑器。## 功能特性- **统一工具栏**：所有功能都集中在顶部一行- **格式化工具**：粗体、斜体、引用、代码等- **标题工具**：H1、H2、H3 快速插入- **列表支持**：有序和无序列表- **插入功能**：链接、图片、表格- **导出选项**：支持多种格式导出- **实时预览**：左右分屏实时预览- **主题切换**：支持明暗主题- **全屏模式**：专注写作体验- **字数统计**：实时显示字数、字符数和阅读时间## 使用说明1. 在左侧编辑器中输入 Markdown 内容2. 右侧会实时显示预览效果3. 使用顶部工具栏快速插入格式4. 拖拽中间分隔条调整编辑器和预览区域大小5. 点击导出按钮选择导出格式## 快捷键- **Ctrl+B**：粗体- **Ctrl+I**：斜体- **Ctrl+K**：插入链接- **Ctrl+Alt+Q**：引用- **Ctrl+Alt+U**：无序列表标题样式默认样式标题样式单行工具栏 Markdown 编辑器
+ 这是一个将所有工具栏功能合并到一行的现代化 Markdown 编辑器。
+ 功能特性
+
+ 统一工具栏：所有功能都集中在顶部一行
+ 格式化工具：粗体、斜体、引用、代码等
+ 标题工具：H1、H2、H3 快速插入
+ 列表支持：有序和无序列表
+ 插入功能：链接、图片、表格
+ 导出选项：支持多种格式导出
+ 实时预览：左右分屏实时预览
+ 主题切换：支持明暗主题
+ 全屏模式：专注写作体验
+ 字数统计：实时显示字数、字符数和阅读时间
+
+ 使用说明
+
+ 在左侧编辑器中输入 Markdown 内容
+ 右侧会实时显示预览效果
+ 使用顶部工具栏快速插入格式
+ 拖拽中间分隔条调整编辑器和预览区域大小
+ 点击导出按钮选择导出格式
+
+ 快捷键
+
+ Ctrl+B：粗体
+ Ctrl+I：斜体
+ Ctrl+K：插入链接
+ Ctrl+Alt+Q：引用
+ Ctrl+Alt+U：无序列表
+ Ctrl+Alt+O：有序列表
+
+ 代码示例
+ function hello() {
+   console.log("Hello, World!");
+ }
+
+ 表格示例
+ 功能描述状态格式化文本格式化工具✅预览实时预览✅导出多格式导出✅主题明暗主题切换✅
+ 数学公式
+ 行内公式：E=mc2E = mc^2E=mc2
+ 块级公式：
+ ∫−∞∞e−x2dx=π\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}∫−∞∞​e−x2dx=π​
+
+ 这是一个引用示例，展示了引用文本的样式。
+
+
+ 开始使用这个强大的 Markdown 编辑器吧！
+     
+     
+     
+   
+
Call log:
  - expect.toContainText with timeout 5000ms
  - waiting for locator('body')
    8 × locator resolved to <body>…</body>
      - unexpected value "
    125 字866 字符阅读 1分钟991234567891011121314151617181920212223242526272829303132›⌄⌄⌄⌄# 单行工具栏 Markdown 编辑器这是一个将所有工具栏功能合并到一行的现代化 Markdown 编辑器。## 功能特性- **统一工具栏**：所有功能都集中在顶部一行- **格式化工具**：粗体、斜体、引用、代码等- **标题工具**：H1、H2、H3 快速插入- **列表支持**：有序和无序列表- **插入功能**：链接、图片、表格- **导出选项**：支持多种格式导出- **实时预览**：左右分屏实时预览- **主题切换**：支持明暗主题- **全屏模式**：专注写作体验- **字数统计**：实时显示字数、字符数和阅读时间## 使用说明1. 在左侧编辑器中输入 Markdown 内容2. 右侧会实时显示预览效果3. 使用顶部工具栏快速插入格式4. 拖拽中间分隔条调整编辑器和预览区域大小5. 点击导出按钮选择导出格式## 快捷键- **Ctrl+B**：粗体- **Ctrl+I**：斜体- **Ctrl+K**：插入链接- **Ctrl+Alt+Q**：引用- **Ctrl+Alt+U**：无序列表标题样式默认样式标题样式单行工具栏 Markdown 编辑器
这是一个将所有工具栏功能合并到一行的现代化 Markdown 编辑器。
功能特性

统一工具栏：所有功能都集中在顶部一行
格式化工具：粗体、斜体、引用、代码等
标题工具：H1、H2、H3 快速插入
列表支持：有序和无序列表
插入功能：链接、图片、表格
导出选项：支持多种格式导出
实时预览：左右分屏实时预览
主题切换：支持明暗主题
全屏模式：专注写作体验
字数统计：实时显示字数、字符数和阅读时间

使用说明

在左侧编辑器中输入 Markdown 内容
右侧会实时显示预览效果
使用顶部工具栏快速插入格式
拖拽中间分隔条调整编辑器和预览区域大小
点击导出按钮选择导出格式

快捷键

Ctrl+B：粗体
Ctrl+I：斜体
Ctrl+K：插入链接
Ctrl+Alt+Q：引用
Ctrl+Alt+U：无序列表
Ctrl+Alt+O：有序列表

代码示例
function hello() {
  console.log("Hello, World!");
}

表格示例
功能描述状态格式化文本格式化工具✅预览实时预览✅导出多格式导出✅主题明暗主题切换✅
数学公式
行内公式：E=mc2E = mc^2E=mc2
块级公式：
∫−∞∞e−x2dx=π\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}∫−∞∞​e−x2dx=π​

这是一个引用示例，展示了引用文本的样式。


开始使用这个强大的 Markdown 编辑器吧！
    
    
    
  
"

    at D:\MarkDownEditor\e2e\functionality-test.spec.ts:21:40
```

# Page snapshot

```yaml
- button "粗体 (Ctrl+B)"
- button "斜体 (Ctrl+I)"
- button "引用"
- button "代码"
- button "链接"
- button "图片"
- button "无序列表"
- button "有序列表"
- button "表格"
- button "H1"
- button "H2"
- button "H3"
- text: 125 字 866 字符 阅读 1分钟
- button
- button "切换主题"
- button "全屏模式"
- button "设置"
- textbox
- text: 标题样式
- combobox: 默认样式
- heading "单行工具栏 Markdown 编辑器" [level=1]
- paragraph: 这是一个将所有工具栏功能合并到一行的现代化 Markdown 编辑器。
- heading "功能特性" [level=2]
- list:
  - listitem:
    - strong: 统一工具栏
    - text: ：所有功能都集中在顶部一行
  - listitem:
    - strong: 格式化工具
    - text: ：粗体、斜体、引用、代码等
  - listitem:
    - strong: 标题工具
    - text: ：H1、H2、H3 快速插入
  - listitem:
    - strong: 列表支持
    - text: ：有序和无序列表
  - listitem:
    - strong: 插入功能
    - text: ：链接、图片、表格
  - listitem:
    - strong: 导出选项
    - text: ：支持多种格式导出
  - listitem:
    - strong: 实时预览
    - text: ：左右分屏实时预览
  - listitem:
    - strong: 主题切换
    - text: ：支持明暗主题
  - listitem:
    - strong: 全屏模式
    - text: ：专注写作体验
  - listitem:
    - strong: 字数统计
    - text: ：实时显示字数、字符数和阅读时间
- heading "使用说明" [level=2]
- list:
  - listitem: 在左侧编辑器中输入 Markdown 内容
  - listitem: 右侧会实时显示预览效果
  - listitem: 使用顶部工具栏快速插入格式
  - listitem: 拖拽中间分隔条调整编辑器和预览区域大小
  - listitem: 点击导出按钮选择导出格式
- heading "快捷键" [level=2]
- list:
  - listitem:
    - strong: Ctrl+B
    - text: ：粗体
  - listitem:
    - strong: Ctrl+I
    - text: ：斜体
  - listitem:
    - strong: Ctrl+K
    - text: ：插入链接
  - listitem:
    - strong: Ctrl+Alt+Q
    - text: ：引用
  - listitem:
    - strong: Ctrl+Alt+U
    - text: ：无序列表
  - listitem:
    - strong: Ctrl+Alt+O
    - text: ：有序列表
- heading "代码示例" [level=2]
- code: "function hello() { console.log(\"Hello, World!\"); }"
- heading "表格示例" [level=2]
- table:
  - rowgroup:
    - row "功能 描述 状态":
      - cell "功能"
      - cell "描述"
      - cell "状态"
  - rowgroup:
    - row "格式化 文本格式化工具 ✅":
      - cell "格式化"
      - cell "文本格式化工具"
      - cell "✅"
    - row "预览 实时预览 ✅":
      - cell "预览"
      - cell "实时预览"
      - cell "✅"
    - row "导出 多格式导出 ✅":
      - cell "导出"
      - cell "多格式导出"
      - cell "✅"
    - row "主题 明暗主题切换 ✅":
      - cell "主题"
      - cell "明暗主题切换"
      - cell "✅"
- heading "数学公式" [level=2]
- paragraph:
  - text: 行内公式：
  - math: E = m c 2 E = mc^2
- paragraph: 块级公式：
- math: "∫ − ∞ ∞ e − x 2 d x = π \\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}"
- blockquote:
  - paragraph: 这是一个引用示例，展示了引用文本的样式。
- separator
- paragraph: 开始使用这个强大的 Markdown 编辑器吧！
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('修复功能验证测试', () => {
   4 |   test.beforeEach(async ({ page }) => {
   5 |     // 访问主程序页面
   6 |     await page.goto('/');
   7 |     // 等待页面加载完成
   8 |     await page.waitForLoadState('networkidle');
   9 |     // 等待额外时间确保所有组件都已加载
   10 |     await page.waitForTimeout(2000);
   11 |   });
   12 |
   13 |   test('验证页面基本加载', async ({ page }) => {
   14 |     // 检查页面标题
   15 |     await expect(page).toHaveTitle(/Markdown编辑器|Markdown Editor/);
   16 |     
   17 |     // 检查编辑器容器存在
   18 |     await expect(page.locator('.editor-container')).toBeVisible();
   19 |     
   20 |     // 检查有内容显示
>  21 |     await expect(page.locator('body')).toContainText('欢迎使用');
      |                                        ^ Error: Timed out 5000ms waiting for expect(locator).toContainText(expected)
   22 |   });
   23 |
   24 |   test('验证深色模式预览界面修复', async ({ page }) => {
   25 |     // 等待页面完全加载
   26 |     await page.waitForTimeout(3000);
   27 |     
   28 |     // 查找任何包含主题切换功能的按钮
   29 |     const themeButtons = page.locator('button').filter({ hasText: /主题|模式|dark|light/i });
   30 |     const iconButtons = page.locator('button svg').locator('..').filter({ hasText: '' });
   31 |     
   32 |     // 尝试点击可能的主题切换按钮
   33 |     const allButtons = page.locator('button');
   34 |     const buttonCount = await allButtons.count();
   35 |     
   36 |     let themeToggled = false;
   37 |     for (let i = 0; i < buttonCount; i++) {
   38 |       const button = allButtons.nth(i);
   39 |       const title = await button.getAttribute('title');
   40 |       const ariaLabel = await button.getAttribute('aria-label');
   41 |       
   42 |       if (title?.includes('主题') || title?.includes('深色') || title?.includes('浅色') ||
   43 |           ariaLabel?.includes('主题') || ariaLabel?.includes('深色') || ariaLabel?.includes('浅色')) {
   44 |         await button.click();
   45 |         await page.waitForTimeout(1000);
   46 |         themeToggled = true;
   47 |         break;
   48 |       }
   49 |     }
   50 |     
   51 |     if (!themeToggled) {
   52 |       // 如果没有找到明确的主题按钮，尝试点击可能的图标按钮
   53 |       const iconButtons = page.locator('button').filter({ has: page.locator('svg') });
   54 |       const iconCount = await iconButtons.count();
   55 |       
   56 |       if (iconCount > 0) {
   57 |         await iconButtons.first().click();
   58 |         await page.waitForTimeout(1000);
   59 |       }
   60 |     }
   61 |     
   62 |     // 验证页面主题属性存在
   63 |     const htmlElement = page.locator('html');
   64 |     const dataTheme = await htmlElement.getAttribute('data-theme');
   65 |     
   66 |     // 验证主题属性是有效的
   67 |     expect(dataTheme).toMatch(/light|dark/);
   68 |     
   69 |     console.log('当前主题:', dataTheme);
   70 |   });
   71 |
   72 |   test('验证全屏按钮功能', async ({ page }) => {
   73 |     // 等待页面完全加载
   74 |     await page.waitForTimeout(3000);
   75 |     
   76 |     // 查找可能的全屏按钮
   77 |     const allButtons = page.locator('button');
   78 |     const buttonCount = await allButtons.count();
   79 |     
   80 |     let fullscreenButtonFound = false;
   81 |     for (let i = 0; i < buttonCount; i++) {
   82 |       const button = allButtons.nth(i);
   83 |       const title = await button.getAttribute('title');
   84 |       const ariaLabel = await button.getAttribute('aria-label');
   85 |       
   86 |       if (title?.includes('全屏') || title?.includes('fullscreen') ||
   87 |           ariaLabel?.includes('全屏') || ariaLabel?.includes('fullscreen')) {
   88 |         await button.click();
   89 |         await page.waitForTimeout(1000);
   90 |         fullscreenButtonFound = true;
   91 |         break;
   92 |       }
   93 |     }
   94 |     
   95 |     // 如果没有找到明确的全屏按钮，测试通过（可能按钮文本不同）
   96 |     if (!fullscreenButtonFound) {
   97 |       console.log('未找到明确的全屏按钮，但页面加载正常');
   98 |     }
   99 |     
  100 |     // 验证页面仍然正常显示
  101 |     await expect(page.locator('body')).toBeVisible();
  102 |   });
  103 |
  104 |   test('验证设置按钮功能', async ({ page }) => {
  105 |     // 等待页面完全加载
  106 |     await page.waitForTimeout(3000);
  107 |     
  108 |     // 查找可能的设置按钮（齿轮图标或设置文本）
  109 |     const allButtons = page.locator('button');
  110 |     const buttonCount = await allButtons.count();
  111 |     
  112 |     let settingsButtonFound = false;
  113 |     for (let i = 0; i < buttonCount; i++) {
  114 |       const button = allButtons.nth(i);
  115 |       const title = await button.getAttribute('title');
  116 |       const ariaLabel = await button.getAttribute('aria-label');
  117 |       
  118 |       if (title?.includes('设置') || title?.includes('settings') ||
  119 |           ariaLabel?.includes('设置') || ariaLabel?.includes('settings')) {
  120 |         await button.click();
  121 |         await page.waitForTimeout(1000);
```