<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快速功能验证</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .status-card {
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            text-align: center;
            transition: all 0.3s ease;
        }
        .status-card.success {
            border-color: #4caf50;
            background-color: #f1f8e9;
        }
        .status-card.error {
            border-color: #f44336;
            background-color: #ffebee;
        }
        .status-card.warning {
            border-color: #ff9800;
            background-color: #fff3e0;
        }
        .status-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        .status-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .status-desc {
            font-size: 14px;
            color: #666;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 20px;
            transition: transform 0.2s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
        }
        .instructions {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
        .app-link {
            display: inline-block;
            background: #28a745;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            margin: 10px;
            transition: background 0.3s ease;
        }
        .app-link:hover {
            background: #218838;
            color: white;
            text-decoration: none;
        }
        .result-area {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Markdown编辑器功能验证</h1>
        
        <div class="instructions">
            <h3>📋 验证说明</h3>
            <p>这个页面帮助您快速验证Markdown编辑器的修复功能。请按照以下步骤操作：</p>
            <ol>
                <li>点击下方链接打开应用</li>
                <li>按照测试卡片的说明进行验证</li>
                <li>观察功能是否正常工作</li>
            </ol>
        </div>

        <div style="text-align: center; margin-bottom: 30px;">
            <a href="http://localhost:3001/" target="_blank" class="app-link">🏠 打开主程序</a>
            <a href="http://localhost:3001/?test-page" target="_blank" class="app-link">🧪 打开测试页面</a>
        </div>

        <div class="status-grid">
            <div class="status-card" id="theme-card">
                <div class="status-icon">🌓</div>
                <div class="status-title">深色模式预览修复</div>
                <div class="status-desc">
                    <strong>测试步骤：</strong><br>
                    1. 点击主题切换按钮<br>
                    2. 切换到深色模式<br>
                    3. 观察预览区域背景<br>
                    <strong>期望结果：</strong>预览区域变为深色背景
                </div>
            </div>

            <div class="status-card" id="fullscreen-card">
                <div class="status-icon">🖥️</div>
                <div class="status-title">全屏按钮修复</div>
                <div class="status-desc">
                    <strong>测试步骤：</strong><br>
                    1. 找到全屏按钮（展开图标）<br>
                    2. 点击进入全屏<br>
                    3. 再次点击退出全屏<br>
                    <strong>期望结果：</strong>能正常进入和退出全屏
                </div>
            </div>

            <div class="status-card" id="settings-card">
                <div class="status-icon">⚙️</div>
                <div class="status-title">设置按钮修复</div>
                <div class="status-desc">
                    <strong>测试步骤：</strong><br>
                    1. 找到设置按钮（齿轮图标）<br>
                    2. 点击打开设置菜单<br>
                    3. 查看主题设置和布局设置<br>
                    <strong>期望结果：</strong>菜单正常打开，选项可用
                </div>
            </div>

            <div class="status-card" id="overall-card">
                <div class="status-icon">✅</div>
                <div class="status-title">整体功能验证</div>
                <div class="status-desc">
                    <strong>检查项目：</strong><br>
                    • 页面正常加载<br>
                    • 工具栏按钮可见<br>
                    • 编辑器和预览区域存在<br>
                    • 字数统计显示<br>
                    <strong>期望结果：</strong>所有基本功能正常
                </div>
            </div>
        </div>

        <button class="test-button" onclick="runQuickTest()">🔍 运行快速检测</button>

        <div class="instructions">
            <h3>🎯 修复验证重点</h3>
            <p><strong>已修复的问题：</strong></p>
            <ul>
                <li>✅ <strong>深色模式预览</strong>：预览区域现在正确响应深色主题</li>
                <li>✅ <strong>全屏按钮</strong>：全屏功能现在可以正常工作</li>
                <li>✅ <strong>设置按钮</strong>：齿轮按钮现在可以打开设置菜单</li>
            </ul>
            <p><strong>如果遇到问题：</strong></p>
            <ul>
                <li>确保开发服务器正在运行（npm run dev）</li>
                <li>刷新页面重新加载</li>
                <li>检查浏览器控制台是否有错误</li>
            </ul>
        </div>

        <div id="test-results" class="result-area" style="display: none;"></div>
    </div>

    <script>
        function updateCard(cardId, status) {
            const card = document.getElementById(cardId);
            card.className = `status-card ${status}`;
        }

        function showResults(message) {
            const resultsArea = document.getElementById('test-results');
            resultsArea.style.display = 'block';
            resultsArea.innerHTML = message;
        }

        async function runQuickTest() {
            showResults('🔄 正在运行快速检测...\n\n');
            
            try {
                // 测试主程序是否可访问
                const response = await fetch('http://localhost:3001/');
                if (response.ok) {
                    updateCard('overall-card', 'success');
                    showResults('✅ 服务器连接成功\n✅ 主程序可访问\n\n请手动测试以下功能：\n\n1. 🌓 主题切换：点击主题按钮，观察预览区域是否变色\n2. 🖥️ 全屏功能：点击全屏按钮，测试进入/退出全屏\n3. ⚙️ 设置功能：点击齿轮按钮，查看设置菜单\n\n如果以上功能都正常工作，说明修复成功！');
                    
                    // 模拟测试状态更新
                    setTimeout(() => updateCard('theme-card', 'warning'), 1000);
                    setTimeout(() => updateCard('fullscreen-card', 'warning'), 1500);
                    setTimeout(() => updateCard('settings-card', 'warning'), 2000);
                } else {
                    updateCard('overall-card', 'error');
                    showResults('❌ 无法连接到开发服务器\n\n请确保运行了 npm run dev 命令\n并且服务器在 http://localhost:3001 上运行');
                }
            } catch (error) {
                updateCard('overall-card', 'error');
                showResults('❌ 连接错误: ' + error.message + '\n\n请检查：\n1. 开发服务器是否正在运行\n2. 端口3001是否可用\n3. 网络连接是否正常');
            }
        }

        // 页面加载时自动检测
        window.onload = function() {
            setTimeout(runQuickTest, 1000);
        };

        // 添加键盘快捷键
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 't') {
                e.preventDefault();
                runQuickTest();
            }
        });
    </script>
</body>
</html>
