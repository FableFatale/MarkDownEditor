<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEOåˆ†æå™¨é”™è¯¯ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .success {
            border-color: #4caf50;
            background: #f1f8e9;
        }
        .error {
            border-color: #f44336;
            background: #ffebee;
        }
        .warning {
            border-color: #ff9800;
            background: #fff3e0;
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1976d2;
        }
        .log {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.success { background: #4caf50; color: white; }
        .status.error { background: #f44336; color: white; }
        .status.warning { background: #ff9800; color: white; }
        .status.info { background: #2196f3; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ SEOåˆ†æå™¨é”™è¯¯ä¿®å¤æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ é—®é¢˜æè¿°</h2>
            <p><strong>é”™è¯¯ä¿¡æ¯:</strong> <code>NotFoundError: Node.removeChild: The node to be removed is not a child of this node</code></p>
            <p><strong>é”™è¯¯ä½ç½®:</strong> <code>http://localhost:3001/node_modules/.vite/deps/chunk-KPD4VVXB.js?v=53450a4f:8509</code></p>
            <p><strong>è§¦å‘æ¡ä»¶:</strong> æµ‹è¯•SEOåˆ†æåŠŸèƒ½æ—¶å‡ºç°</p>
        </div>

        <div class="test-section">
            <h2>ğŸ› ï¸ ä¿®å¤æªæ–½</h2>
            <ul>
                <li>âœ… æ·»åŠ äº† <code>AnimatePresence mode="wait"</code> ç¡®ä¿åŠ¨ç”»åºåˆ—æ­£ç¡®</li>
                <li>âœ… ä¸º motion ç»„ä»¶æ·»åŠ äº†å”¯ä¸€çš„ <code>key</code> å±æ€§</li>
                <li>âœ… ä¼˜åŒ–äº†åŠ¨ç”»è¿‡æ¸¡æ—¶é—´ï¼Œé¿å…å¿«é€Ÿåˆ‡æ¢å¯¼è‡´çš„DOMå†²çª</li>
                <li>âœ… æ·»åŠ äº†é”™è¯¯è¾¹ç•Œç»„ä»¶ <code>SEOErrorBoundary</code></li>
                <li>âœ… æ”¹è¿›äº†äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½¿ç”¨ <code>useCallback</code> ç¡®ä¿ç¨³å®šæ€§</li>
                <li>âœ… æ·»åŠ äº†ç»„ä»¶å¸è½½æ—¶çš„æ¸…ç†é€»è¾‘</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
            <div id="test-results">
                <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>
            </div>
            
            <button onclick="testSEOAnalyzer()">ğŸ” æµ‹è¯•SEOåˆ†æå™¨</button>
            <button onclick="testMultipleOpen()">ğŸ”„ æµ‹è¯•å¤šæ¬¡å¼€å…³</button>
            <button onclick="testErrorHandling()">âš ï¸ æµ‹è¯•é”™è¯¯å¤„ç†</button>
            <button onclick="clearResults()">ğŸ§¹ æ¸…é™¤ç»“æœ</button>
            
            <div id="test-log" class="log" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-summary">
                <p>ç­‰å¾…æµ‹è¯•å¼€å§‹...</p>
            </div>
        </div>
    </div>

    <script>
        let testLog = [];
        let testResults = {
            passed: 0,
            failed: 0,
            warnings: 0
        };

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            testLog.push(`[${timestamp}] ${type.toUpperCase()}: ${message}`);
            updateLogDisplay();
            
            // æ›´æ–°æµ‹è¯•ç»“æœç»Ÿè®¡
            if (type === 'success') testResults.passed++;
            else if (type === 'error') testResults.failed++;
            else if (type === 'warning') testResults.warnings++;
            
            updateSummary();
        }

        function updateLogDisplay() {
            const logElement = document.getElementById('test-log');
            logElement.style.display = 'block';
            logElement.innerHTML = testLog.join('\n');
            logElement.scrollTop = logElement.scrollHeight;
        }

        function updateSummary() {
            const summaryElement = document.getElementById('test-summary');
            const total = testResults.passed + testResults.failed + testResults.warnings;
            
            summaryElement.innerHTML = `
                <p>æµ‹è¯•æ€»æ•°: ${total}</p>
                <p><span class="status success">é€šè¿‡: ${testResults.passed}</span></p>
                <p><span class="status error">å¤±è´¥: ${testResults.failed}</span></p>
                <p><span class="status warning">è­¦å‘Š: ${testResults.warnings}</span></p>
            `;
        }

        function testSEOAnalyzer() {
            log('å¼€å§‹æµ‹è¯•SEOåˆ†æå™¨åŸºæœ¬åŠŸèƒ½...');
            
            try {
                // æ¨¡æ‹Ÿæ‰“å¼€ä¸»åº”ç”¨
                log('æ­£åœ¨è®¿é—®ä¸»åº”ç”¨é¡µé¢...', 'info');
                
                // æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
                if (document.readyState === 'complete') {
                    log('é¡µé¢åŠ è½½å®Œæˆ', 'success');
                } else {
                    log('é¡µé¢ä»åœ¨åŠ è½½ä¸­', 'warning');
                }
                
                // æ¨¡æ‹ŸSEOåˆ†æå™¨æµ‹è¯•
                setTimeout(() => {
                    log('æ¨¡æ‹Ÿç‚¹å‡»SEOåˆ†ææŒ‰é’®...', 'info');
                    
                    // æ£€æŸ¥æ˜¯å¦æœ‰DOMæ“ä½œé”™è¯¯
                    try {
                        // æ¨¡æ‹Ÿåˆ›å»ºå’Œç§»é™¤DOMå…ƒç´ 
                        const testElement = document.createElement('div');
                        testElement.id = 'seo-test-element';
                        document.body.appendChild(testElement);
                        
                        setTimeout(() => {
                            if (testElement.parentNode) {
                                testElement.parentNode.removeChild(testElement);
                                log('DOMæ“ä½œæµ‹è¯•é€šè¿‡', 'success');
                            } else {
                                log('DOMå…ƒç´ å·²è¢«ç§»é™¤æˆ–ä¸å­˜åœ¨çˆ¶èŠ‚ç‚¹', 'warning');
                            }
                        }, 100);
                        
                    } catch (error) {
                        log(`DOMæ“ä½œé”™è¯¯: ${error.message}`, 'error');
                    }
                }, 500);
                
            } catch (error) {
                log(`æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function testMultipleOpen() {
            log('å¼€å§‹æµ‹è¯•å¤šæ¬¡å¼€å…³SEOåˆ†æå™¨...', 'info');
            
            let openCount = 0;
            const maxTests = 5;
            
            function simulateOpenClose() {
                if (openCount >= maxTests) {
                    log(`å®Œæˆ${maxTests}æ¬¡å¼€å…³æµ‹è¯•`, 'success');
                    return;
                }
                
                openCount++;
                log(`ç¬¬${openCount}æ¬¡å¼€å…³æµ‹è¯•...`, 'info');
                
                try {
                    // æ¨¡æ‹Ÿå¿«é€Ÿå¼€å…³
                    const testDiv = document.createElement('div');
                    testDiv.className = 'seo-analyzer-mock';
                    document.body.appendChild(testDiv);
                    
                    setTimeout(() => {
                        if (testDiv.parentNode) {
                            testDiv.parentNode.removeChild(testDiv);
                            log(`ç¬¬${openCount}æ¬¡æµ‹è¯•é€šè¿‡`, 'success');
                        }
                        
                        setTimeout(simulateOpenClose, 200);
                    }, 100);
                    
                } catch (error) {
                    log(`ç¬¬${openCount}æ¬¡æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                }
            }
            
            simulateOpenClose();
        }

        function testErrorHandling() {
            log('å¼€å§‹æµ‹è¯•é”™è¯¯å¤„ç†æœºåˆ¶...', 'info');
            
            try {
                // æ¨¡æ‹Ÿå„ç§é”™è¯¯æƒ…å†µ
                log('æµ‹è¯•1: å°è¯•ç§»é™¤ä¸å­˜åœ¨çš„å­èŠ‚ç‚¹', 'info');
                
                const parent = document.createElement('div');
                const child = document.createElement('span');
                
                try {
                    parent.removeChild(child); // è¿™åº”è¯¥ä¼šæŠ›å‡ºé”™è¯¯
                    log('æ„å¤–ï¼šæ²¡æœ‰æŠ›å‡ºé¢„æœŸçš„é”™è¯¯', 'warning');
                } catch (error) {
                    if (error.name === 'NotFoundError' || error.message.includes('not a child')) {
                        log('æ­£ç¡®æ•è·äº†NotFoundError', 'success');
                    } else {
                        log(`æ•è·äº†ä¸åŒçš„é”™è¯¯: ${error.message}`, 'warning');
                    }
                }
                
                log('æµ‹è¯•2: æ£€æŸ¥é”™è¯¯è¾¹ç•Œæ˜¯å¦å·¥ä½œ', 'info');
                // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šé”™è¯¯è¾¹ç•Œæµ‹è¯•
                log('é”™è¯¯è¾¹ç•Œæµ‹è¯•éœ€è¦åœ¨å®é™…Reactç¯å¢ƒä¸­è¿›è¡Œ', 'info');
                
            } catch (error) {
                log(`é”™è¯¯å¤„ç†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function clearResults() {
            testLog = [];
            testResults = { passed: 0, failed: 0, warnings: 0 };
            document.getElementById('test-log').style.display = 'none';
            document.getElementById('test-summary').innerHTML = '<p>ç­‰å¾…æµ‹è¯•å¼€å§‹...</p>';
            log('æµ‹è¯•ç»“æœå·²æ¸…é™¤', 'info');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('SEOåˆ†æå™¨é”™è¯¯ä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½', 'success');
            log('è¯·è®¿é—® http://localhost:3001 æµ‹è¯•å®é™…åŠŸèƒ½', 'info');
        });
    </script>
</body>
</html>
