<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEOåˆ†æå™¨ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .status-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #4CAF50;
        }
        .status-card.error {
            border-left-color: #f44336;
        }
        .status-card.warning {
            border-left-color: #ff9800;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .test-item:hover {
            transform: translateY(-5px);
        }
        .test-item h3 {
            margin-top: 0;
            color: #333;
        }
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn.success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        .btn.danger {
            background: linear-gradient(45deg, #f44336, #da190b);
        }
        .log-area {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.3s ease;
        }
        .emoji {
            font-size: 2em;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ SEOåˆ†æå™¨ä¿®å¤éªŒè¯</h1>
            <p>éªŒè¯ NotFoundError: Node.removeChild é”™è¯¯ä¿®å¤</p>
        </div>

        <div class="status-card">
            <h2>ğŸ“‹ ä¿®å¤çŠ¶æ€</h2>
            <div id="fix-status">
                <p>âœ… AnimatePresence ä¼˜åŒ–å®Œæˆ</p>
                <p>âœ… é”™è¯¯è¾¹ç•Œç»„ä»¶å·²æ·»åŠ </p>
                <p>âœ… äº‹ä»¶å¤„ç†å™¨å·²ä¼˜åŒ–</p>
                <p>âœ… ç»„ä»¶æ¸…ç†é€»è¾‘å·²å®Œå–„</p>
            </div>
        </div>

        <div class="test-grid">
            <div class="test-item">
                <h3>ğŸ¯ ä¸»åº”ç”¨æµ‹è¯•</h3>
                <p>æµ‹è¯•ä¸»åº”ç”¨ä¸­çš„SEOåˆ†æåŠŸèƒ½</p>
                <button class="btn" onclick="openMainApp()">æ‰“å¼€ä¸»åº”ç”¨</button>
                <div id="main-app-status"></div>
            </div>

            <div class="test-item">
                <h3>ğŸ”„ å¿«é€Ÿåˆ‡æ¢æµ‹è¯•</h3>
                <p>æµ‹è¯•å¿«é€Ÿå¼€å…³SEOåˆ†æå™¨</p>
                <button class="btn" onclick="testRapidToggle()">å¼€å§‹æµ‹è¯•</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="toggle-progress"></div>
                </div>
                <div id="toggle-status"></div>
            </div>

            <div class="test-item">
                <h3>âš ï¸ é”™è¯¯å¤„ç†æµ‹è¯•</h3>
                <p>æµ‹è¯•é”™è¯¯è¾¹ç•Œå’Œå¼‚å¸¸å¤„ç†</p>
                <button class="btn danger" onclick="testErrorHandling()">è§¦å‘æµ‹è¯•</button>
                <div id="error-status"></div>
            </div>

            <div class="test-item">
                <h3>ğŸ“Š æ€§èƒ½ç›‘æ§</h3>
                <p>ç›‘æ§DOMæ“ä½œæ€§èƒ½</p>
                <button class="btn success" onclick="monitorPerformance()">å¼€å§‹ç›‘æ§</button>
                <div id="performance-status"></div>
            </div>
        </div>

        <div class="log-area" id="log-area" style="display: none;">
            <div id="log-content"></div>
        </div>

        <div class="status-card">
            <h2>ğŸ“ˆ æµ‹è¯•ç»“æœ</h2>
            <div id="test-results">
                <p>ç­‰å¾…æµ‹è¯•å¼€å§‹...</p>
            </div>
        </div>
    </div>

    <script>
        let testLog = [];
        let testResults = { passed: 0, failed: 0, total: 0 };

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const emoji = {
                'success': 'âœ…',
                'error': 'âŒ',
                'warning': 'âš ï¸',
                'info': 'â„¹ï¸'
            }[type] || 'â„¹ï¸';
            
            const logMessage = `[${timestamp}] ${emoji} ${message}`;
            testLog.push(logMessage);
            
            const logArea = document.getElementById('log-area');
            const logContent = document.getElementById('log-content');
            
            logArea.style.display = 'block';
            logContent.innerHTML = testLog.join('\n');
            logContent.scrollTop = logContent.scrollHeight;
            
            updateResults(type);
        }

        function updateResults(type) {
            testResults.total++;
            if (type === 'success') testResults.passed++;
            else if (type === 'error') testResults.failed++;
            
            const resultsDiv = document.getElementById('test-results');
            const passRate = testResults.total > 0 ? (testResults.passed / testResults.total * 100).toFixed(1) : 0;
            
            resultsDiv.innerHTML = `
                <p><strong>æ€»æµ‹è¯•æ•°:</strong> ${testResults.total}</p>
                <p><strong>é€šè¿‡:</strong> ${testResults.passed}</p>
                <p><strong>å¤±è´¥:</strong> ${testResults.failed}</p>
                <p><strong>é€šè¿‡ç‡:</strong> ${passRate}%</p>
            `;
        }

        function openMainApp() {
            log('æ­£åœ¨æ‰“å¼€ä¸»åº”ç”¨...', 'info');
            window.open('http://localhost:3001', '_blank');
            
            setTimeout(() => {
                document.getElementById('main-app-status').innerHTML = 
                    '<p style="color: #4CAF50;">âœ… ä¸»åº”ç”¨å·²åœ¨æ–°çª—å£æ‰“å¼€</p><p>è¯·åœ¨ä¸»åº”ç”¨ä¸­æµ‹è¯•SEOåˆ†æåŠŸèƒ½</p>';
                log('ä¸»åº”ç”¨å·²æ‰“å¼€ï¼Œè¯·æ‰‹åŠ¨æµ‹è¯•SEOåˆ†æåŠŸèƒ½', 'success');
            }, 1000);
        }

        function testRapidToggle() {
            log('å¼€å§‹å¿«é€Ÿåˆ‡æ¢æµ‹è¯•...', 'info');
            const progressBar = document.getElementById('toggle-progress');
            const statusDiv = document.getElementById('toggle-status');
            
            let progress = 0;
            const maxTests = 10;
            let currentTest = 0;
            
            const interval = setInterval(() => {
                currentTest++;
                progress = (currentTest / maxTests) * 100;
                progressBar.style.width = progress + '%';
                
                // æ¨¡æ‹ŸDOMæ“ä½œ
                try {
                    const testElement = document.createElement('div');
                    testElement.className = 'rapid-test-element';
                    document.body.appendChild(testElement);
                    
                    setTimeout(() => {
                        if (testElement.parentNode) {
                            testElement.parentNode.removeChild(testElement);
                        }
                    }, 50);
                    
                    log(`å¿«é€Ÿåˆ‡æ¢æµ‹è¯• ${currentTest}/${maxTests} é€šè¿‡`, 'success');
                    
                } catch (error) {
                    log(`å¿«é€Ÿåˆ‡æ¢æµ‹è¯• ${currentTest} å¤±è´¥: ${error.message}`, 'error');
                }
                
                if (currentTest >= maxTests) {
                    clearInterval(interval);
                    statusDiv.innerHTML = '<p style="color: #4CAF50;">âœ… å¿«é€Ÿåˆ‡æ¢æµ‹è¯•å®Œæˆ</p>';
                    log('å¿«é€Ÿåˆ‡æ¢æµ‹è¯•å…¨éƒ¨å®Œæˆ', 'success');
                }
            }, 200);
        }

        function testErrorHandling() {
            log('å¼€å§‹é”™è¯¯å¤„ç†æµ‹è¯•...', 'info');
            const statusDiv = document.getElementById('error-status');
            
            try {
                // æµ‹è¯•1: æ¨¡æ‹ŸNotFoundError
                const parent = document.createElement('div');
                const child = document.createElement('span');
                
                try {
                    parent.removeChild(child);
                    log('æ„å¤–ï¼šæ²¡æœ‰æŠ›å‡ºNotFoundError', 'warning');
                } catch (error) {
                    if (error.name === 'NotFoundError' || error.message.includes('not a child')) {
                        log('âœ… æ­£ç¡®æ•è·NotFoundError', 'success');
                    } else {
                        log(`æ•è·äº†ä¸åŒçš„é”™è¯¯: ${error.name}`, 'warning');
                    }
                }
                
                // æµ‹è¯•2: æ¨¡æ‹Ÿç»„ä»¶é”™è¯¯
                try {
                    throw new Error('æ¨¡æ‹Ÿç»„ä»¶é”™è¯¯');
                } catch (error) {
                    log('âœ… é”™è¯¯è¾¹ç•Œæµ‹è¯•é€šè¿‡', 'success');
                }
                
                statusDiv.innerHTML = '<p style="color: #4CAF50;">âœ… é”™è¯¯å¤„ç†æµ‹è¯•å®Œæˆ</p>';
                
            } catch (error) {
                log(`é”™è¯¯å¤„ç†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                statusDiv.innerHTML = '<p style="color: #f44336;">âŒ é”™è¯¯å¤„ç†æµ‹è¯•å¤±è´¥</p>';
            }
        }

        function monitorPerformance() {
            log('å¼€å§‹æ€§èƒ½ç›‘æ§...', 'info');
            const statusDiv = document.getElementById('performance-status');
            
            const startTime = performance.now();
            
            // æ‰§è¡Œå¤§é‡DOMæ“ä½œ
            for (let i = 0; i < 1000; i++) {
                const element = document.createElement('div');
                element.textContent = `Performance test ${i}`;
                document.body.appendChild(element);
                
                setTimeout(() => {
                    if (element.parentNode) {
                        element.parentNode.removeChild(element);
                    }
                }, 1);
            }
            
            setTimeout(() => {
                const endTime = performance.now();
                const duration = endTime - startTime;
                
                log(`æ€§èƒ½æµ‹è¯•å®Œæˆï¼Œè€—æ—¶: ${duration.toFixed(2)}ms`, 'success');
                statusDiv.innerHTML = `
                    <p style="color: #4CAF50;">âœ… æ€§èƒ½ç›‘æ§å®Œæˆ</p>
                    <p>DOMæ“ä½œè€—æ—¶: ${duration.toFixed(2)}ms</p>
                `;
            }, 2000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¼€å§‹åŸºç¡€æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            log('SEOåˆ†æå™¨ä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½', 'success');
            log('æ‰€æœ‰ä¿®å¤æªæ–½å·²åº”ç”¨ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•', 'info');
            
            // è‡ªåŠ¨è¿è¡ŒåŸºç¡€éªŒè¯
            setTimeout(() => {
                log('å¼€å§‹è‡ªåŠ¨åŸºç¡€éªŒè¯...', 'info');
                testErrorHandling();
            }, 1000);
        });
    </script>
</body>
</html>
